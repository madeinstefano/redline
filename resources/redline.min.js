String.prototype.padLeft=function(c,a){var b=new RegExp(".{"+a+"}$"),d="";do{d+=c}while(d.length<a);return b.exec(d+this)[0]};Number.prototype.trunc=function(){return this|0};$(function(){$(window).bind("keydown keyup keypress",function(b){if(b.keyCode===65&&b.ctrlKey){return false}});$("body").append('<div id="fx-player"></div>');$("#fx-player").jPlayer({swfPath:"resources/",preload:"metadata",solution:"html, flash",volume:1,ready:function(){$(this).jPlayer("setMedia",{wav:"resources/beep.wav",mp3:"resources/beep.mp3",oga:"resources/beep.ogg",m4a:"resources/beep.m4a"}).jPlayer("load")},supplied:"wav, m4a, oga, mp3"});$("#time-input-minutes, #time-input-seconds").val("00");$("#time-input-minutes, #time-input-seconds").bind("input keyup paste drop",function(b){$(this).val($(this).val().replace(/\D/,""));return true});$("#time-input-increase-minutes").mousehold(100,function(){var b=Number($("#time-input-minutes").val());$("#time-input-minutes").val(String(b===99?0:++b).padLeft("0",2))});$("#time-input-decrease-minutes").mousehold(100,function(){var b=Number($("#time-input-minutes").val());$("#time-input-minutes").val(String(b=b===0?99:--b).padLeft("0",2))});$("#time-input-increase-seconds").mousehold(100,function(){var d=Number($("#time-input-seconds").val());if(d===59){d=0;var b=Number($("#time-input-minutes").val());$("#time-input-minutes").val(String(b===99?0:++b).padLeft("0",2))}else{++d}$("#time-input-seconds").val(String(d).padLeft("0",2))});$("#time-input-decrease-seconds").mousehold(100,function(){var d=Number($("#time-input-seconds").val());if(d===0){d=59;var b=Number($("#time-input-minutes").val());$("#time-input-minutes").val(String(b=b===0?99:--b).padLeft("0",2))}else{--d}$("#time-input-seconds").val(String(d).padLeft("0",2))});$("#set-time").bind("click",function(){$("#time-input-shadow , #time-input-container").fadeOut(500);a.setTime($("#time-input-minutes").val(),$("#time-input-seconds").val())});$("body").append('<div id="tip-wrapper"><div id="tip-arrow-border"></div><div id="tip-arrow"></div><div id="tip-body"></div></div>');$("#tip-body").append('Thanks for using my stopwatch. Please visit my site:<a href="http://www.iceon.me" target="blank">iceon.me</a>');$(".digit").wrap('<div class="digit-wrapper" data-current="true"></div>');$(".digit-case").prepend('<div class="digit-wrapper" style="margin-top:-200px;"><span class="digit"></span></div>');$(".digit-case").prepend('<div class="pusher"></div>');$("*").disableSelection();var a=(function(){var i=0,c=0,h=0,p="",l="",g={STARTED:1,STOPPED:0,READY:2,OVER:3},n=null,b=null,r=null,j=["0","0"],e=["0","0"],m=["0","0","0"],f=g.READY;function q(v,w){$(v).find(".digit").text(w)}function s(v,w,x){$(v).find(".digit").first().text(w);if(!$(v).find(":animated").size()){$(v).find(".pusher").animate({height:200},{duration:x||250,complete:function(){$(this).siblings("div[data-current=true]").remove();$(this).siblings(".digit-wrapper").css("margin-top","0px");$(this).siblings(".digit-wrapper").attr("data-current","true");$(this).css("margin-top","-200px");$(this).html('<span class="digit"></span>');$(this).switchClass("pusher","digit-wrapper");$(this).parent().prepend('<div class="pusher"></div>');$(this).find("*").disableSelection()}})}}function u(){$("#action").unbind("click");$("#reset").unbind("click");$("#restart").unbind("click");var v=setInterval(function(){if(!$("#dial :animated").size()){s("#minute_1",0);s("#minute_2",0);s("#second_1",0);s("#second_2",0);s("#millisecond_1",0);s("#millisecond_2",0);s("#millisecond_3",0);$("#progress-bar-evolutor").width(0);f=g.OVER;clearInterval(v)}},20)}function o(v){if(v){$("#fx-player").jPlayer("play")}f=g.STOPPED;clearInterval(n);clearInterval(b);clearInterval(r);c=i-new Date();$("#action").text("Start")}function d(){f=g.STARTED;$("#action").text("Stop");i=new Date(new Date().getTime()+c);k()}function t(){$("#action").unbind("click");$("#reset").unbind("click");$("#restart").unbind("click");f=g.READY;c=i=h=(Number(p)*60000)+(Number(l)*1000);j=p.padLeft("0",2).split("");e=l.padLeft("0",2).split("");m=["0","0","0"];var v=setInterval(function(){if(!$("#dial :animated").size()){s("#minute_1",j[0]);s("#minute_2",j[1]);s("#second_1",e[0]);s("#second_2",e[1]);s("#millisecond_1","0");s("#millisecond_2","0");s("#millisecond_3","0");$("#progress-bar-evolutor").width(0);var w=setInterval(function(){if(!$("#dial :animated").size()){$("#action").bind("click",a.action);$("#reset").bind("click",a.reset);$("#restart").bind("click",a.restart);clearInterval(w)}},20);clearInterval(v)}},20)}function k(){r=setInterval(function(){var v=i-new Date();$("#progress-bar-evolutor").width((100-Math.ceil(((v/h)*100)))*4.4);if(v<=0){clearInterval(r)}},1);b=setInterval(function(){var w=i-new Date();if(w<=0){o(true);q("#millisecond_1",0);q("#millisecond_2",0);q("#millisecond_3",0);return}var v=w.toString().padLeft("0",3).split("");if(m[0]!==v[0]){q("#millisecond_1",v[0]);m[0]=v[0]}if(m[1]!==v[1]){q("#millisecond_2",v[1]);m[1]=v[1]}if(m[2]!==v[2]){q("#millisecond_3",v[2]);m[2]=v[2]}},31);n=setInterval(function(){var w=i-new Date(),x=((w/1000)-((w/60000).trunc()*60)).trunc().toString().padLeft("0",2).split(""),v=null;if(e[1]!==x[1]){s("#second_2",x[1]);e[1]=x[1];if(e[0]!==x[0]){v=(w/60000).trunc().toString().padLeft("0",2).split(""),s("#second_1",x[0]);e[0]=x[0];if(j[1]!==v[1]){s("#minute_2",v[1]);j[1]=v[1];if(j[0]!==v[0]){s("#minute_1",v[0]);j[0]=v[0]}}}}},201)}return{setTime:function(w,v){p=w;l=v;t()},action:function(){if(f===g.OVER){return}f===g.STARTED?o():d()},restart:function(){if(f===g.READY||f===g.OVER){return}if(f===g.STARTED){o()}t()},reset:function(){if(f===g.OVER){return}if(f===g.STARTED){o()}u();setTimeout(function(){$("#time-input-shadow , #time-input-container").fadeIn(500)},500)}}})()});